<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="NLP,Machine Translate,Machine Learning" />





  <link rel="alternate" href="/atom.xml" title="cibiluozu" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="纵有万千风浪在，亦将持剑凯歌往。">
<meta property="og:type" content="website">
<meta property="og:title" content="cibiluozu">
<meta property="og:url" content="http://cibiluozu.com/index.html">
<meta property="og:site_name" content="cibiluozu">
<meta property="og:description" content="纵有万千风浪在，亦将持剑凯歌往。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="cibiluozu">
<meta name="twitter:description" content="纵有万千风浪在，亦将持剑凯歌往。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: "always",
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> cibiluozu </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  








  
  

  <div class="container one-collumn  
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">cibiluozu</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'cibiluozu','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/21/最大熵的公式推导/" itemprop="url">
                  最大熵的公式推导和一些应用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-03-21T10:28:39+08:00" content="2016-03-21">
              2016-03-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/03/21/最大熵的公式推导/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/03/21/最大熵的公式推导/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="u6700_u5927_u71B5_u6A21_u578B"><a href="#u6700_u5927_u71B5_u6A21_u578B" class="headerlink" title="最大熵模型"></a>最大熵模型</h1><p>关于最大熵的说明，吴军在数学中提过一个很好的例子，吴军说他问听众，如果给他们一个骰子，任一一面朝上的概率是多少？很显然，答案是1/6,我们在没有获得额外信息的情况下，我们都认为这是一个普通的骰子，这才比较合理，从信息论的角度来看，这是保留了最大的不确定性，接下来吴军又高数听众，这个骰子被我特殊处理过，已知四点朝上的概率是三分之i一,这次大家都认为除去四点的概率是1/3,其余的是2/15。（这里并不考虑如何是四点朝上的概率达到三分之一，也不考虑四点对面是几点），也就是说已知条件满足的情况下，对于未知信息，我们依然认为它们均匀分布，这种基于直觉的概率之所以准确，是因为它恰好符合了最大熵原理。</p>
<h1 id="u6700_u5927_u71B5_u6A21_u578B_u7684_u63A8_u5BFC"><a href="#u6700_u5927_u71B5_u6A21_u578B_u7684_u63A8_u5BFC" class="headerlink" title="最大熵模型的推导"></a>最大熵模型的推导</h1><p>(基本上都出自李航的《统计学习方法》自己推了一遍，可能有些细节书里面没有)<br>虽然我们的很多直觉都符合最大熵原理，但是计算机并没有直觉啊，只有将某些时间转化为数学公式，我们才能用计算机去解决它。<br>那么最大熵原理用数学语言表示就是：带约束的最优化问题。那么约束是什么，要优化的公式是什么，请看下面：<br>我们知道最大熵对待已知事物和未知事物时我们要做的就是承认已知事物，对未知事物不做任何假设，最大熵原理指出当我们满足已知条件的情况下，概率分布尽量均匀，这时概率分布的熵最大，因此人们把这种模型叫做最大熵模型。<br>那么熵的公式是什么呢？<br>$H(P) = -\sum\limits_xP(x)\log P(x)$<br>那么一般使用最大熵来解决什么问题呢？<br>一般来说，我们使用最大熵来解决是一个分类问题。即已知某些条件，给出x,需要判断x属于哪一個类别。<br>简单来说，我们需要训练一个模型$P(Y|X)$,当给定一个x的时候我们选择使得$P(Y|X)$最大的y。<br>接下来介绍几个概念：<br>特征$f(x,y)$:<br>$$<br>f(x,y)=<br>\begin{cases}<br>1, &amp; \text{x和y满足一定条件} \\<br>0, &amp; \text{否则} \\<br>\end{cases}<br>$$</p>
<p>特征函数的作用就是类似于满足某些条件,或者说训练数据有什么特别显眼，特别容易区分的地方。</p>
<p>X,Y的联合分布的经验分布$\tilde{P}(y|x)$<br>$\tilde{P}(y|x) = \frac{v(X=x,Y=y)}{N}$</p>
<p>X的边缘分布$\tilde{P}(x)$:<br>$\tilde{P}(x) = \frac{v(X=x)}{N}$</p>
<p>$E_{\tilde{P}(x)}=\sum\limits_{x,y}{\tilde{P}(x)P(y|x)\log{P(y|x)}}$ 表示特征函数f(x,y) 关于经验分布$\tilde{P}(X,Y)$的期望值。</p>
<p>$E_P(f) = \sum\limits_{x,y}{\tilde{P}(x)P(y|x)f(x,y)}$表示特征函数$f(x,y)$关于模型$P(Y|X)$与经验分布$\tilde P(X)$ 的期望值。<br>两个期望值的作用就是定下一些约束(因为必须保证这两个经验分布的值相等)</p>
<p>$H(P)= -\sum\limits_{x,y}{\tilde{P}(x)P(y|x)\log{P(y|x)}}$ 表示模型$P(Y|X)$的条件熵。</p>
<p>最大熵问题一般转化为：</p>
<p>$$<br>\begin{align}<br>&amp; \max\limits_{p \in C} H(P) =-\sum\limits_{x,y}{\tilde{P}(x)P(y|x)log{P}(y|x)} \\<br>s.t. \quad  &amp; E_p(f_i) = E_{\tilde{p}(f_i)}, i=1,2,\dots,n \\<br>&amp; \sum\limits_y P(y|x)=1 \\<br>\end{align}<br>$$</p>
<p>一般我们解决带约束的最优化问题时，最先想到的就是拉格朗日公式：<br>$$ L(P,w)\equiv -H(P) + w_0 \Bigg(1 - \sum\limits_yP(y|x) \Bigg ) + \sum\limits_{i=1}^n{w_i(E_{\tilde{P}}(f_i) - E_p(f_i))}$$<br>现在问题就转化为求$L(P,w)$。<br>由拉格朗日函数的极大极小问题（李航《统计学习方法》附录C）可以得出最优化的原始问题是：<br>$$\min\limits_{P \in C}\max\limits_wL(P,w)$$<br>对偶问题是:<br>$$\max\limits_w\min\limits_{P \in C}L(P,w)$$<br>有几个定义：<br>$$\Psi(w) = \min\limits_{P \in C}L(P,w) = L(P_w,w)$$<br>表示$\min\limits_{P\in C}L(P,w)$ 是w的函数。<br>将其解记为：<br>$$P_w=\arg\min\limits_{P \in C}L(P,w)=P_w(y|x)$$<br>求$L(P,w)$ 对 $P(y|x)$ 的偏导数：<br>$$P(y|x) = \exp \Bigg ( \sum\limits_{i=1}^n w_i f_i(x,y) + w_0 -1 \Bigg ) = \frac{\exp \Bigg( \sum\limits_{i=1}^n w_i f_i(x,y) \Bigg)}{\exp(1-w_0)}$$<br>由于$\sum\limits_yP(y|x)=1$<br>$$P(y|x) = \frac{P(y|x)}{\sum\limits_yP(y|x)} = \frac{1}{Z_w(x)}\exp\Bigg( \sum\limits_{i=1}^n{w_if_i(x,y)}\Bigg)$$<br>$$Z_w(x) = \sum\limits_y\exp \Bigg( \sum\limits_{i=1}^n{w_if_i(x,y)}\Bigg) $$<br>现在要求得是：<br>$$\max\limits_w\Psi(w)$$<br>将其解记为：$w^*$,即：<br>$$w^*=\arg\max\limits_w\Psi(w)$$<br>得到$w^*$后，可以用来表示$P^* \in C$.这里$P^*=P_{w^*}=P_{w^*}(y|x)$是学习到的最优模型(最大熵模型)</p>
<h1 id="u89E3_u51B3_u65B9_u6848"><a href="#u89E3_u51B3_u65B9_u6848" class="headerlink" title="解决方案"></a>解决方案</h1><h2 id="u6539_u8FDB_u7684_u8FED_u4EE3_u5C3A_u5EA6_u7B97_u6CD5_uFF08improved_iterative_scaling_2C_IIS_uFF09"><a href="#u6539_u8FDB_u7684_u8FED_u4EE3_u5C3A_u5EA6_u7B97_u6CD5_uFF08improved_iterative_scaling_2C_IIS_uFF09" class="headerlink" title="改进的迭代尺度算法（improved iterative scaling, IIS）"></a>改进的迭代尺度算法（improved iterative scaling, IIS）</h2><p>我们的最终目的是求得是似然函数，L(w)最大的$\hat{w}$，然后用这个表示$P_w(y|x)$<br>IIS的想法是：假设最大熵当前的参数是$w=(w_1,w_2,\dots,w_n)^T$，我们希望找到一组参数向量 $w+\delta = (w_1+\delta_1 ,w_2+\delta_2,\dots,w_n+\delta_n)^T$能使$L(w+\delta) &gt; L(w)$ 那么可以重复这一方法，直至找到似然函数最大值。</p>
<h3 id="u4E24_u4E2A_u4E0D_u7B49_u5F0F"><a href="#u4E24_u4E2A_u4E0D_u7B49_u5F0F" class="headerlink" title="两个不等式"></a>两个不等式</h3><ol>
<li>$-log \alpha \geq 1 - \alpha$</li>
<li>Jensen 不等式</li>
</ol>
<p>$$<br>f(a_1 \times x_1 + a_2 \times x_2 + \dots + a_n \times x_n) \leq a_1f(x_1) + a_2f(x_2) + \dots + a_nf_n(x) \\<br>a_i \geq 0 \\<br>a_1 + a_2 + \dots + a_n = 1<br>$$</p>
<h3 id="u63A8_u5BFC_u8FC7_u7A0B"><a href="#u63A8_u5BFC_u8FC7_u7A0B" class="headerlink" title="推导过程"></a>推导过程</h3><p>\begin{align}<br>L(w+\delta) - L(w) &amp;= \sum\limits_{x,y}\tilde{P}(x,y)\log{P_{w+\delta}(y|x)}-\sum\limits_{x,y}\tilde{P}(x,y)\log{P_w(y|x)} \\<br>&amp;=\sum\limits_{x,y}\tilde{P}(x,y)\sum\limits_{i=1}^n\delta_if_i(x,y)-\sum\limits_x\tilde{P}(x)\log{\frac{Z_{w+\delta}(x)}{Z_w(x)}} \\<br>&amp;\geq \sum\limits_{x,y}{\tilde P(x,y) \sum\limits_{i=1}^n{\delta_if_i(x,y)}} + 1 - \sum\limits_x{\tilde P (x)\frac{Z_{w+\delta}(x)}{Z_w(x)}}  \\<br>&amp;=\sum\limits_{x,y}\tilde P(x,y) \sum\limits_{i=1}^n{\delta_if_i(x,y)} + 1 - \sum\limits_x{\tilde P(x)} \sum\limits_y\Bigg(\frac{P_{w+\delta}(y|x)}{P_w(y|x)}P_w(y|x)\frac{Z_{w+\delta}(x)}{Z_w(x)} \Bigg)  \\<br>&amp;=\sum\limits_{x,y}\tilde P(x,y) \sum\limits_{i=1}^n{\delta_if_i(x,y)} + 1 - \sum\limits_x{\tilde P(x)}\sum\limits_y{\Bigg( \frac{P_{w+\delta}(y|x)}{P_w(y|x)}\frac{P_w(y|x)}{P_{w+\delta}(y|x)}P_w(y|x)\exp\sum\limits_{i=1}^n\delta_if_i(x,y)} \Bigg ) \\<br>&amp;=\sum\limits_{x,y}\tilde P(x,y) \sum\limits_{i=1}^n{\delta_if_i(x,y)} + 1 - \sum\limits_x {\tilde P(x) \sum\limits_y P_w(y|x)\exp\sum\limits_{i=1}^n\delta_if_i(x,y)}<br>\end{align}</p>
<p>右端记做：<br>$A(\delta|w) = \sum\limits_{x,y}\tilde P(x,y) \sum\limits_{i=1}^n{\delta_if_i(x,y)} + 1 - \sum\limits_x {\tilde P(x) \sum\limits_y P_w(y|x)\exp\sum\limits_{i=1}^n\delta_if_i(x,y)}$<br>于是有：<br>$$L(w+\delta) - L(w) \geq A(\delta|w)$$<br>然而，函数$A(\delta|w)$中的$\delta$是一个向量，含有多个变量，不易同时优化. IIS试图一次只优化其中一个变量$\delta_i$,而固定其他变量$\delta_j$.<br>为达到这一目的，IIS进一步降低下界$A(\delta|w)$,IIS引入一个新的量$f^\sharp(x,y)$,<br>$$f^\sharp(x,y)=\sum\limits_if_i(x,y)$$将$A(\delta|w)$改写为：<br>$$A(\delta|w)=\sum\limits_{x,y}\tilde P(x,y)\sum\limits_{i=1}^n\delta_if_i(x,y)+1-\sum\limits_x\tilde P(x)\sum\limits_y{P_w(y|x)\exp\Bigg( f^\sharp(x,y)\sum\limits_{i=1}^n\frac{\delta_if_i(x,y)}{f^\sharp(x,y)}\Bigg)}$$<br>由于指数函数是凸函数，并且有$\frac{f_i(x,y)}{f^\sharp(x,y)} &gt; 0 $且$\sum\limits_{i=1}^n\frac{f_i(x,y)}{f^\sharp(x,y)} = 1$根据Jensen不等式：<br>$$\exp{\Bigg(\sum\limits_{i=1}^n\frac{f_i(x,y)}{f^\sharp(x,y)} \delta_if^\sharp(x,y)\Bigg)} \leq \sum\limits_{i=1}^n\frac{f_i(x,y)}{f^\sharp(x,y)}\exp(\delta_if^\sharp(x,y))$$<br>$$A(\delta|w)\geq\sum\limits_{x,y}\tilde P(x,y)\sum\limits_{i=1}^n\delta_if_i(x,y)+1-\sum\limits_x\tilde P(x) \sum\limits_yP_w(y|x)\sum\limits_{i=1}^n\Bigg(\frac{f_i(x,y)}{f^\sharp(x,y)}\Bigg)\exp(\delta_if^\sharp(x,y))$$</p>
<p>$B(\delta|w)=\sum\limits_{x,y}\tilde P(x,y)\sum\limits_{i=1}^n\delta_if_i(x,y)+1-\sum\limits_x\tilde P(x) \sum\limits_yP_w(y|x)\sum\limits_{i=1}^n\Bigg(\frac{f_i(x,y)}{f^\sharp(x,y)}\Bigg)\exp(\delta_if^\sharp(x,y))$<br>求$B(\delta|w)$对$\delta_i$的偏导数:<br>$$\frac{\partial B(\delta|w)}{\partial \delta_i} = \sum\limits_{x,y}\tilde P(x,y)f_i(x,y)-\sum\limits_x\tilde P(x)\sum\limits_yP_w(x,y)f_i(x,y)exp(\delta_if^\sharp(x,y))$$<br>偏导数为0得：<br>$\sum\limits_{x,y}\tilde P(x)P_w(y|x)f_i(x,y)\exp(\delta_if^\sharp(x,y)) = E_{\tilde P}(f_i)$<br>依次对$\delta_i$求解方程可以求出$\delta$</p>
<h3 id="u5177_u4F53_u6B65_u9AA4"><a href="#u5177_u4F53_u6B65_u9AA4" class="headerlink" title="具体步骤"></a>具体步骤</h3><p>输入：特征函数$f_1,f_2,\dots,f_n$;经验分布$\tilde P(X,Y)$ , 模型 $P_w(y|x)$<br>输出：最优参数 $w^*$;模型$P_{w^*}(y|x)$</p>
<ol>
<li>对所有$i\in{1,2,\dots,n}$取初始值$w_i=0$</li>
<li>对每一$i\in{1,2,\dots,n}$:<br>a. 令$\delta_i$是方程：$$\sum\limits_{x,y}\tilde P(x)P(y|x)f_i(x,y)\exp(\delta_if^\sharp(x,y)) = E_{\tilde{P}}(f_i)$$<br>b. 更新$w_i$值：$w_i\gets w_i + \delta_i$</li>
<li>如果不是所有$w_i$都收敛，重复步2.<br>这一算法的关键步骤是a,及求方程中的$\delta_i$,如果$f^\sharp(x,y)$是常数，即对任何x,y,有 $f^\sharp(x,y)=M$,那么$\delta_i$可以显示的表示成<br>$$\delta_i=\frac{1}{M}\log{\frac{E_{\tilde{P}}(f_i)}{E_p(f_i)}}$$<br>如果$f^\sharp(x,y)$不是常数,那么必须通过数值计算求$\delta_i$.简单有效的方法是牛顿法。</li>
</ol>
<h1 id="u6700_u5927_u71B5_u7684_u5E94_u7528"><a href="#u6700_u5927_u71B5_u7684_u5E94_u7528" class="headerlink" title="最大熵的应用"></a>最大熵的应用</h1><h2 id="u6700_u5927_u71B5_u6587_u672C_u5206_u7C7B"><a href="#u6700_u5927_u71B5_u6587_u672C_u5206_u7C7B" class="headerlink" title="最大熵文本分类"></a>最大熵文本分类</h2><p>代码和详细说明见这个<a href="http://blog.csdn.net/u012176591/article/details/45576089" target="_blank" rel="external">BLOG</a></p>
<ol>
<li>定义特征：<br>$$<br>f(x,y)=<br>\begin{cases}<br>\frac{\sharp(c,x)}{x_{totalword}}, &amp; \text{某个文本x包含单词c,并且属于类别y} \\<br>0, &amp; \text{文本x未包含单词c，或x不在类别y中。} \\<br>\end{cases}<br>$$<br>设WordSize为所有文本中单词表的大小，GroupSize为所有类别的个数。<br>则特征的个数有WordSize*GroupSize的个数。 </li>
<li>定义更新量:<br>因为$f^\sharp(x,y)=\sum\limits_{i=1}^nf_i(x,y)$<br>并且<br>$\delta = \frac{1}{M}\log{\frac{E_{\tilde{P}}f_i}{E_pf_i}}$<br>因为$f^\sharp(x,y)$表示x文本和y类对所有特征的和。因为一个文本必然只属于一个类别，所以$f^\sharp(x,y)$为一个二值函数，<br>$$<br>f^\sharp(x,y)=<br>\begin{cases}<br>1, &amp;\text{x属于类别y} \\<br>0, &amp;\text{x不属于类别y} \\<br>\end{cases}<br>$$<br>当$f^\sharp(x,y)$为0时，$f_i(x,y)$也为0，<br>$$<br>\sum\limits_{x,y}\tilde{P}(x)P(y|x)f_i(x,y)\exp(\delta_if^\sharp(x,y)) = E_{\tilde{P}}(f_i)$$<br>等式两边都为0，对$\delta_i$没有影响。<br>因此只有$f^\sharp(x,y)$为1时,即<br>$\delta_i = \log{\frac{E_{\tilde\ P}f_i}{E_pf_i}}$,此时M为1</li>
</ol>
<p>$E_{\tilde{P}}(f_i) = \sum\limits_{x,y}\tilde{P}(x,y)f_i(x,y)$<br>因为在训练语料中，一个文本只属于一个类，因此，当x不属于类y时，$\tilde P(x,y) = 0$,当x属于类y时，$\tilde P(x,y) = \frac{1}{TextSize}$,其中TextSize 为文本个数。那么其实$E_{\tilde{P}}(f_i) = \frac{1}{TextSize}\sum\limits_{x,y}f_i(x,y)$<br>其中x属于y类。<br>$E_P(f_i) = \sum\limits_{x,y}\tilde{P}(x)P(y|x)f_i(x,y) = \frac{1}{TextSize}\sum\limits_{x,y}P(y|x)f_i(x,y)$<br>由约束条件：$E_{\tilde{P}} = E_P$可知，我们要求$\sum\limits_{x,y}f_i(x,y) = \sum\limits_{x,y}P(y|x)f_i(x,y)$,左边式子中x属于y类。<br>可以利用以上等式进行文本训练了。</p>
<h1 id="u6700_u5927_u71B5_u8C03_u5E8F_u6A21_u578B"><a href="#u6700_u5927_u71B5_u8C03_u5E8F_u6A21_u578B" class="headerlink" title="最大熵调序模型"></a>最大熵调序模型</h1><p>所谓最大熵调序模型是在解码的时候，(例如CKY解码时候，有两个片段的调序，这时候调序模型会分别给这两个片段的正序和反序打一个分数) 也就是说，我定义了一个特征，为短语对的源短语1,2,目标短语1,2,的首词和尾词，然后看这个短语对在语料中是否应该被调序，如果应该被调序，那么特征值为1,否则为0</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/29/GIZA-参数说明/" itemprop="url">
                  GIZA++参数说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-03-29T10:46:23+08:00" content="2015-03-29">
              2015-03-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/29/GIZA-参数说明/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/29/GIZA-参数说明/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##GIZA++ 参数说明 </p>
<p><strong>1.  下载GIZA++</strong><br><strong>2.  准备语料，这里使用的是NiuTrans 里面 经过乱码过滤及数据预处理过后的sample中的数据。</strong><br><strong>3.  在linux环境下，gcc版本为4.8.1 （可用gcc -v 查询）</strong><br><strong>4.  解压所下载的GIZA++，我的版本为giza-pp-v1.0.7，发现其中有两个文件夹，其中mkcls是用于生成word class的。</strong><br><img src="/img/GIZA++_img1.png" alt="GIZA++_img1"><br><img src="/img/GIZA++_img2.png" alt="GIZA++_img2"><br><strong>5. 对其进行编译，新建一文件夹“tool”，并将生成的GIZA++-v2目录下的“GIZA++”，“snt2cooc.out”,“plain2snt.out”以及 mkcls-v2目录下的“mkcls”拷贝到tool下，并将准备好的语料也放入这个文件夹。</strong><br><img src="/img/GIZA++_img3.png" alt="GIZA++_img3"><br><img src="/img/GIZA++_img4.png" alt="GIZA++_img4"><br><strong>6.使用plain2snt.out 将 普通文本转化成GIZA++格式的文本。</strong><br><img src="/img/GIZA++_img5.png" alt="GIZA++_img5"><br><img src="/img/GIZA++_img6.png" alt="GIZA++_img6"><br>此时，tool文件夹下有如下内容：<br><img src="/img/GIZA++_img7.png" alt="GIZA++_img7"></p>
<p>格式说明：</p>
<p><em>ch.vcb (en.vcb)</em></p>
<p>例子：<br><img src="/img/GIZA++_img8.png" alt="GIZA++_img8"></p>
<p><em>ch_en.snt(en_ch.snt)</em></p>
<p>每一个句子对都包括三行，第一行表示该句子对出现的次数，第二行表示源语言单词的ID序列（该例子中是中文即ch），第三行表示目标语言中的单词ID序列（该例子中是英文即en）</p>
<p>例子：<br><img src="/img/GIZA++_img9.png" alt="GIZA++_img9"></p>
<ul>
<li>0 下标保留给特殊的 NULL</li>
</ul>
<p><strong>7. 运行 snt2cooc.out 获得共线文件。</strong></p>
<p><img src="/img/GIZA++_img10.png" alt="GIZA++_img10"></p>
<p>生成了 ：</p>
<p><img src="/img/GIZA++_img11.png" alt="GIZA++_img11"></p>
<p>格式说明：</p>
<p><em>ch_en.cooc(en_ch.cooc)</em><br>包含所有可能的单词对。（按源句子字符串ID排列）</p>
<ul>
<li>注：一个单词能与另一个单词形成单词对的规则是两个单词都在一个句子对里。如果一个单词和另一个单词从未在句子对中出现过，则不构成单词对。比如3 乌鲁木齐 1 只在第一个句子对中出现过，所以它只能与第一个句子对中的目标句子字符串形成单词对。</li>
</ul>
<p>例子：</p>
<p><img src="/img/GIZA++_img12.png" alt="GIZA++_img12"></p>
<p><strong>8.  使用mkcls进行词语聚类</strong></p>
<p>参数设置：<br>-n:表示训练迭代次数，默认为1<br>-p: 需要聚类的已分词文本<br>-V:输出信息<br>opt：优化运行<br>（注意参数与后面的值之间没有空格）</p>
<p><img src="/img/GIZA++_img14.png" alt="GIZA++_img14"></p>
<p>生成文件：</p>
<p><img src="/img/GIZA++_img15.png" alt="GIZA++_img15"></p>
<p><em>ch.classes (en.classes)</em><br>例子：</p>
<p><img src="/img/GIZA++_img16.png" alt="GIZA++_img16"></p>
<p><em>ch.classes.cats  (en.classes.cats)</em></p>
<p><img src="/img/GIZA++_img17.png" alt="GIZA++_img17"></p>
<p><strong>9.接下来运行GIZA++实现对齐操作</strong><br><img src="/img/GIZA++_img18.png" alt="GIZA++_img18"></p>
<p>参数设置：<br>-m1 IBM 模型1的迭代次数。<br>-m2 IBM 模型2的迭代次数。<br>-m3 IBM 模型3的迭代次数。<br>-m4 IBM 模型4的迭代次数。<br>-m5 IBM 模型5的迭代次数。<br>-mh HMM 模型的迭代次数。<br>-CocurrenceFile  是一个特殊文件，包括所有可能的词汇对<br>-d 词典文件的位置(注意此处的词典应该是每个词的ID都有的，如果词典中没有的话，那么就取对空)<br>-s 源句子的词汇表<br>-t 目标句子的词汇表<br>-c 句子对的文件<br>-tc 测试文件<br>-o 输出文件的前缀<br>-nbestalignments 显示最好的n个对齐结果</p>
<p>其中生成的文件有：</p>
<p><img src="/img/GIZA++_img19.png" alt="GIZA++_img19"><br><img src="/img/GIZA++_img20.png" alt="GIZA++_img20"></p>
<p>格式说明：</p>
<p><em>c2e.a3.final</em><br> 每一行的文件格式如下所示。<br> i  j  l m p(i|j,l,m)<br> 其中代表的意义为：<br> j = 在目标句子中的位置<br> i = 在源句子中的位置<br> l = 源句子的长度<br> m =  目标句子的长度</p>
<p> 例子：</p>
<p><img src="/img/GIZA++_img21.png" alt="GIZA++_img21"></p>
<p><em>c2e.A3.final</em><br>对齐文件<br>格式如下：<br><img src="/img/GIZA++_img22.png" alt="GIZA++_img22"><br>*花括号里表示的是该词对应的句子中的词的下标。</p>
<p><em>c2e.d3.final</em></p>
<p>每一行的文件格式如下所示。<br>j  i  l m p(i|j,l,m)<br>(与a只有一点不同，即j与i交换了位置)</p>
<p>例子：</p>
<p><img src="/img/GIZA++_img23.png" alt="GIZA++_img23"></p>
<p><em>c2e.d4.final</em><br>Translation tables for Model 4</p>
<p><em>c2e.D4.final</em><br>IBM Model4 的 distortion 表</p>
<p><em>c2e.Decoder.config</em><br>用与ISI Rewrite Decoder 解码器</p>
<p><em>c2e.gizacfg</em><br>包含了GIZA++的这次训练中所有参数的设定。在做同样的训练时可以用到。</p>
<p><em>c2e.n3.final</em><br>(Fertility  table)<br>一个单词能够对应多少个词的概率。<br>格式为<br>source_token_id  p0 p1 p2 ….. pn<br>p0 是该词一个词都不对应的概率。</p>
<p>例子：<br><img src="/img/GIZA++_img24.png" alt="GIZA++_img24"></p>
<p><em>c2e.p0_3.final</em><br>这个文件只包含一个实数，即不插入空值的概率。</p>
<p><em>c2e.perp</em><br>训练的最后产生，概括了每次迭代的困惑度值。</p>
<p>例子：<br><img src="/img/GIZA++_img25.png" alt="GIZA++_img25"></p>
<p><em>c2e.t3.final</em><br>(translation table)</p>
<p>例子：<br><img src="/img/GIZA++_img26.png" alt="GIZA++_img26"></p>
<p><em>c2e.trn.src.vcb c2e.trn.trg.vcb</em><br>类似于ch.vcb en.vcb 但是更准确。</p>
<p><em>c2e.tst.src.vcb c2e.tst.trg.vcb</em><br>空文件</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/03/01/基于HMM的词性标注/" itemprop="url">
                  基于HMM的词性标注
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-03-01T21:02:08+08:00" content="2015-03-01">
              2015-03-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NLP/" itemprop="url" rel="index">
                    <span itemprop="name">NLP</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/03/01/基于HMM的词性标注/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/03/01/基于HMM的词性标注/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前帮学长写了一个词性标注的小程序，使用的是CBT的语料。</p>
<p>##语料的处理</p>
<p>首先我们要对语料进行预处理，首先为了后面处理的方便我们需要将每一个词和词性映射到一个数字上，这个数字就作为后面数组的下标。</p>
<p>词对应</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">! <span class="number">0</span></span><br><span class="line">$ <span class="number">1</span></span><br><span class="line">* <span class="number">2</span></span><br><span class="line">, <span class="number">3</span></span><br><span class="line">,×ÐÓã <span class="number">4</span></span><br><span class="line">- <span class="number">5</span></span><br><span class="line">---- <span class="number">6</span></span><br><span class="line">. <span class="number">7</span></span><br><span class="line">/ <span class="number">8</span></span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="number">0.36</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line">...  ...</span><br><span class="line"></span><br><span class="line">魅力 <span class="number">34566</span></span><br><span class="line">魅影 <span class="number">34567</span></span><br><span class="line">飨 <span class="number">34568</span></span><br><span class="line">鬓 <span class="number">34569</span></span><br><span class="line">鬓影 <span class="number">34570</span></span><br><span class="line">麽 <span class="number">34571</span></span><br><span class="line">黯淡 <span class="number">34572</span></span><br><span class="line">黯然 <span class="number">34573</span></span><br><span class="line">黯然失色 <span class="number">34574</span></span><br><span class="line">黯哑 <span class="number">34575</span></span><br><span class="line">鼾声 <span class="number">34576</span></span><br></pre></td></tr></table></figure>
<p>词性对应</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">AD <span class="number">1</span></span><br><span class="line">AS <span class="number">2</span></span><br><span class="line">BA <span class="number">3</span></span><br><span class="line">CC <span class="number">4</span></span><br><span class="line">CD <span class="number">5</span></span><br><span class="line">CS <span class="number">6</span></span><br><span class="line">DEC <span class="number">7</span></span><br><span class="line">DEG <span class="number">8</span></span><br><span class="line">DER <span class="number">9</span></span><br><span class="line">DEV <span class="number">10</span></span><br><span class="line">DT <span class="number">11</span></span><br><span class="line">ETC <span class="number">12</span></span><br><span class="line">FW <span class="number">13</span></span><br><span class="line">IJ <span class="number">14</span></span><br><span class="line">JJ <span class="number">15</span></span><br><span class="line">LB <span class="number">16</span></span><br><span class="line">LC <span class="number">17</span></span><br><span class="line">M <span class="number">18</span></span><br><span class="line">MSP <span class="number">19</span></span><br><span class="line">NN <span class="number">20</span></span><br><span class="line">NP <span class="number">21</span></span><br><span class="line">NR <span class="number">22</span></span><br><span class="line">NT <span class="number">23</span></span><br><span class="line">OD <span class="number">24</span></span><br><span class="line">P <span class="number">25</span></span><br><span class="line">PN <span class="number">26</span></span><br><span class="line">PU <span class="number">27</span></span><br><span class="line">SB <span class="number">28</span></span><br><span class="line">SP <span class="number">29</span></span><br><span class="line">VA <span class="number">30</span></span><br><span class="line">VC <span class="number">31</span></span><br><span class="line">VE <span class="number">32</span></span><br><span class="line">VP <span class="number">33</span></span><br><span class="line">VV <span class="number">34</span></span><br><span class="line">X <span class="number">35</span></span><br></pre></td></tr></table></figure>
<p>这里面词性的下标不是从0开始的，这是因为0下标另有它用，它是作为开始标记的。</p>
<p>同时我们要记录下前后相邻两个词性出现的次数，并计算概率，如果有两个词性从未前后出现过，那么进行平滑处理，这里简单的使用加一平滑的方法。</p>
<p>计算相邻词性出现的概率</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">1</span> -<span class="number">2.23558</span></span><br><span class="line"><span class="number">0</span> <span class="number">2</span> -<span class="number">11.9889</span></span><br><span class="line"><span class="number">0</span> <span class="number">3</span> -<span class="number">8.05705</span></span><br><span class="line"><span class="number">0</span> <span class="number">4</span> -<span class="number">7.19309</span></span><br><span class="line"><span class="number">0</span> <span class="number">5</span> -<span class="number">3.65537</span></span><br><span class="line"><span class="number">0</span> <span class="number">6</span> -<span class="number">4.62941</span></span><br><span class="line"><span class="number">0</span> <span class="number">7</span> -<span class="number">11.9889</span></span><br><span class="line"><span class="number">0</span> <span class="number">8</span> -<span class="number">11.9889</span></span><br><span class="line"><span class="number">0</span> <span class="number">9</span> -<span class="number">11.9889</span></span><br><span class="line"><span class="number">0</span> <span class="number">10</span> -<span class="number">11.988</span></span><br><span class="line"></span><br><span class="line">... ... ...</span><br><span class="line"></span><br><span class="line"><span class="number">15</span> <span class="number">36</span> -<span class="number">11.6505</span></span><br><span class="line"><span class="number">16</span> <span class="number">36</span> -<span class="number">7.66153</span></span><br><span class="line"><span class="number">17</span> <span class="number">36</span> -<span class="number">6.72625</span></span><br><span class="line"><span class="number">18</span> <span class="number">36</span> -<span class="number">5.55195</span></span><br><span class="line"><span class="number">19</span> <span class="number">36</span> -<span class="number">9.34793</span></span><br><span class="line"><span class="number">20</span> <span class="number">36</span> -<span class="number">4.84458</span></span><br><span class="line"><span class="number">21</span> <span class="number">36</span> -<span class="number">4.17439</span></span><br><span class="line"><span class="number">22</span> <span class="number">36</span> -<span class="number">5.03365</span></span><br><span class="line"><span class="number">23</span> <span class="number">36</span> -<span class="number">6.07967</span></span><br><span class="line"><span class="number">24</span> <span class="number">36</span> -<span class="number">6.55278</span></span><br><span class="line"><span class="number">25</span> <span class="number">36</span> -<span class="number">11.9417</span></span><br><span class="line"><span class="number">26</span> <span class="number">36</span> -<span class="number">7.89508</span></span><br><span class="line"><span class="number">27</span> <span class="number">36</span> -<span class="number">1.55266</span></span><br><span class="line"><span class="number">28</span> <span class="number">36</span> -<span class="number">8.29029</span></span><br><span class="line"><span class="number">29</span> <span class="number">36</span> -<span class="number">8.2388</span></span><br><span class="line"><span class="number">30</span> <span class="number">36</span> -<span class="number">4.65352</span></span><br><span class="line"><span class="number">31</span> <span class="number">36</span> -<span class="number">10.7537</span></span><br><span class="line"><span class="number">32</span> <span class="number">36</span> -<span class="number">10.171</span></span><br><span class="line"><span class="number">33</span> <span class="number">36</span> -<span class="number">3.80666</span></span><br><span class="line"><span class="number">34</span> <span class="number">36</span> -<span class="number">5.29197</span></span><br><span class="line"><span class="number">35</span> <span class="number">36</span> -<span class="number">4.55388</span></span><br></pre></td></tr></table></figure>
<p>前两位数值其中0表示开始符，36 表示结束符，1-35表示其代表的词性， 最后一位数值表示对概率取log值，这是为了方便后面的计算。因为如果是概率的话后面要乘起来会导致一个很小的数字，如果是取log值的话，那么后面只需要加起来就行了。</p>
<p>除此之外，我们还要记录下一个词对应某个词性的概率。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">1</span> -<span class="number">12.7673</span></span><br><span class="line"><span class="number">0</span> <span class="number">2</span> -<span class="number">11.1551</span></span><br><span class="line"><span class="number">0</span> <span class="number">3</span> -<span class="number">10.6247</span></span><br><span class="line"><span class="number">0</span> <span class="number">4</span> -<span class="number">11.5087</span></span><br><span class="line"><span class="number">0</span> <span class="number">5</span> -<span class="number">12.0817</span></span><br><span class="line"><span class="number">0</span> <span class="number">6</span> -<span class="number">10.6544</span></span><br><span class="line"><span class="number">0</span> <span class="number">7</span> -<span class="number">11.88</span></span><br><span class="line"><span class="number">0</span> <span class="number">8</span> -<span class="number">11.8607</span></span><br><span class="line"><span class="number">0</span> <span class="number">9</span> -<span class="number">10.5118</span></span><br><span class="line"><span class="number">0</span> <span class="number">10</span> -<span class="number">10.5946</span></span><br><span class="line"></span><br><span class="line">... ... ...</span><br><span class="line"></span><br><span class="line"><span class="number">34576</span> <span class="number">25</span> -<span class="number">12.1446</span></span><br><span class="line"><span class="number">34576</span> <span class="number">26</span> -<span class="number">11.4176</span></span><br><span class="line"><span class="number">34576</span> <span class="number">27</span> -<span class="number">13.4684</span></span><br><span class="line"><span class="number">34576</span> <span class="number">28</span> -<span class="number">10.5591</span></span><br><span class="line"><span class="number">34576</span> <span class="number">29</span> -<span class="number">10.5539</span></span><br><span class="line"><span class="number">34576</span> <span class="number">30</span> -<span class="number">11.5412</span></span><br><span class="line"><span class="number">34576</span> <span class="number">31</span> -<span class="number">11.3065</span></span><br><span class="line"><span class="number">34576</span> <span class="number">32</span> -<span class="number">11.0133</span></span><br><span class="line"><span class="number">34576</span> <span class="number">33</span> -<span class="number">10.4512</span></span><br><span class="line"><span class="number">34576</span> <span class="number">34</span> -<span class="number">13.3737</span></span><br><span class="line"><span class="number">34576</span> <span class="number">35</span> -<span class="number">10.4527</span></span><br></pre></td></tr></table></figure>
<p>其中第一位数值表示某个词对应的下标，第二位数值表示词性对应的下标，第三位数值表示对该词是该词性的概率取log值。</p>
<p>语料处理完了以后，我们就应该进行词性标注的训练了，既然提起词性标注，就不得不说一说隐形马尔科夫了。</p>
<h2 id="u5982_u4F55_u8FDB_u884C_u8BCD_u6027_u6807_u6CE8"><a href="#u5982_u4F55_u8FDB_u884C_u8BCD_u6027_u6807_u6CE8" class="headerlink" title="如何进行词性标注"></a>如何进行词性标注</h2><p>词性标注，一个简单的解释就是输入一行词序列，输出一行词性的序列，也就是说假设给定序列$x: x_1,x_2,\ldots,x_n$ ,那么我们就要输出序列$y: y_1,y_2,\ldots,y_n$<br>我们要做的很简单，给定x，那么每种可能的y（假设有一个集合Y包含每种可能的y）都会有一个相应的概率，$p(y|x)$ 。<br>对每个给我们的x，我们要做的就是求出使这个概率最大的y，也就是求$arg\underset{y\in\mathcal{Y}}{\max}\,p(y|x)$<br>根据条件概率公式有：$p(y|x) = \,{p(x,y) \over p(x)} = \,{p(y)p(x|y) \over p(x)}$<br>又因为x是给定的，所以p(x)是个定值。我们就能得出这样的式子。</p>
<p>\begin{align}<br>f(x) &amp;= {arg\underset{y\in\mathcal{Y}}{\max}\,p(y|x)} \\<br>&amp;= {arg\underset{y\in\mathcal{Y}}{\max}\,{p(y)p(x|y) \over p(x)}} \\<br>&amp;= {arg\underset{y\in\mathcal{Y}}{\max}\,{p(y)p(x|y)}} \\<br>\end{align}</p>
<p>现在我们简单的将词性标注问题转化成了求两个概率，一个是形成这一串词性的可能性$p(y)$，另一个是某个词性对应某个词的可能性，$p(x|y)$ 。<br>由乘法公式可得 $p(y) = p(y_1,y_2,\ldots,y_n) = p(y_1) \times p(y_2|y_1) \times p(y_3|y_2,y_1) \times \cdots \times p(y_n|y_1,y_2,\ldots,y_{n-1})$<br>但是这个式子太复杂了，如果这么求的话，那就太麻烦了，不如我们假设一下，一个词性只对下一个词性有影响，不影响其他的。(二元)<br>那么由马尔科夫假设知 $p(y) = p(y_1) \times p(y_2|y_1) \times p(y_3|y_2) \times \cdots \times p(y_n|y_{n-1})$<br>而对于$p(x|y)$ 我们简单的认为 $p(x|y) = p(x_1|y_1) \times p(x_2|y_2) \times \cdots \times p(x_n|y_n)$<br>现在问题就简单许多了，对于一个给定的分好词的句子x,和一个假设的y，我们可以得到<br>$p(x_1 \ldots x_n,y_1 \ldots y_{n+1}) = \prod _ {i=1}^{n+1} q(y_i|y_{i-1}) \prod _ {i=1}^n e(x_i|y_i) $<br>注意： $y_0$ 是个开始符号 * ，$y_{n+1}$ 是个结束符号 STOP 。 这两个都不代表某个词性，只表示开始位置和结尾而已。</p>
<p>举个例子：</p>
<p>　|　the　|　dog　|　laughs　<br>*　 |　D  　|　N　　|　V　　|STOP<br>那么<br>\begin{align}<br>p(x_1 \ldots x_n,y_1 \ldots y_{n+1}) =&amp; q(D|*) \times q(N|D) \times q (V|N) \times q(STOP|V) \\<br>&amp; \times e(the|D)  \times e(dog|N) \times e(laughs|V)<br>\end{align}<br>==&gt;关于HMM的更详细的解释看<a href="http://www.zhihu.com/question/20962240" target="_blank" rel="external">这里</a>或<a href="http://www.52nlp.cn/hmm-learn-best-practices-one-introduction" target="_blank" rel="external">这里</a></p>
<p>##Viterbi算法<br>下面来讲一讲Viterbi算法，Viterbi算法是用来求这么多个可能的y，哪个能使 p(y|x) 最大。<br>那么什么是Viterbi算法呢？ 假设我们每天吃三顿饭，每顿饭都有很多种选择，比如说可以选择面包，馒头，米饭，红烧肉，同时，每顿饭的搭配也有它本身的营养价值，比如说中午吃了油荤的，那么晚上吃清淡的就很有营养价值，那么怎么吃才会最有营养价值呢？</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="header">  早餐         午餐            晚餐</span><br><span class="line">-------------------------------------------</span></span><br><span class="line"><span class="code">  面包（10）   红烧肉（20）    红烧肉（20）</span></span><br><span class="line"></span><br><span class="line"><span class="code">  馒头（5）    白菜（10）      白菜（10）</span></span><br><span class="line"></span><br><span class="line"><span class="code">  香肠（20）   豆腐（10）      豆腐（10）</span></span><br><span class="line"></span><br><span class="line"><span class="header">  鸡蛋（20）   鸡翅（20）      鸡翅（20）</span><br><span class="line">-------------------------------------------</span></span><br></pre></td></tr></table></figure>
<p>上面的表表示早餐，午餐，晚餐的饭的可选种类，和其代表的营养值。现在，如果设 Y(红烧肉|面包) = 20 表示上一顿是吃的面包，而这一顿吃的是红烧肉的营养价值是10；<br>且所有的 Y(荤菜|素菜) = 20 Y(素菜|荤菜) = 20 Y(荤菜|荤菜) = 10 Y(素菜|素菜) = 10;<br>而假设 Y(面包|无) = 15 Y(馒头|无) = 5 Y(香肠|无) = 10 Y(鸡蛋|无) = 10 表示第一顿选择某些食物的营养值。<br>那么我早餐选择面包的营养值为面包本身的营养加上 Y(面包|无) = 15 的搭配营养，也就是25，并且由于它只有这一种选择，所以<br>maxpre(面包) = 15 + 10 表示上一顿选择面包的一天最大营养值为25。<br>同理<br>maxpre(馒头) = 5 + 5<br>maxpre(香肠) = 20 + 10<br>maxpre(鸡蛋) = 20 + 10；</p>
<p>如果我中午选择红烧肉的话，那么我可以得到<br>maxpre(红烧肉) = max( 20(红烧肉本身的营养值) + Y(红烧肉|早餐食物种类) + maxpre(早餐食物种类) )；<br>那么有<br>maxpre(红烧肉) = 20 + Y(红烧肉|面包) + maxpre(面包) = 20 + 20 + 25 = 65<br>maxpre(白菜) = 10 + Y(白菜|香肠) + maxpre(香肠) = 10 + 20 + 30 = 60<br>maxpre(豆腐) = 60<br>maxpre(鸡翅) = 65</p>
<p>而晚饭如果我选红烧肉的话<br>maxpre(红烧肉) = 20 + Y(红烧肉|白菜) + maxpre(白菜) = 20 + 20 + 60 = 100<br>如果选择白菜的话<br>maxpre(白菜) = 10 + Y(白菜|红烧肉) + maxpre(红烧肉) = 95<br>假设所有食物作为最后一顿饭的营养价值都相同，即 Y(END|晚餐食物品种) 相等。</p>
<p>那么我一天的最佳搭配可以是： 面包 -&gt; 白菜 -&gt; 红烧肉。</p>
<p>以上用到的想法就是Viterbi算法，即记录上一个选择的最大值，用来估计目前的最大值，同时记录下是上次选择了什么而使得当前的选择最大，在最后得到最大值后回溯，从而的到一个序列，这就是我们要的。</p>
<p>如何用这个想法进行词性标注呢？</p>
<p>举个例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  the  dog  barks</span><br><span class="line"><span class="comment">---------------------</span></span><br><span class="line">  D    D    D      <span class="operator"><span class="keyword">STOP</span></span><br><span class="line">  <span class="keyword">D</span>    <span class="keyword">D</span>    <span class="keyword">N</span>      <span class="keyword">STOP</span></span><br><span class="line">  <span class="keyword">D</span>    <span class="keyword">D</span>    V      <span class="keyword">STOP</span></span><br><span class="line">  <span class="keyword">D</span>    <span class="keyword">N</span>    <span class="keyword">D</span>      <span class="keyword">STOP</span></span><br><span class="line">  <span class="keyword">D</span>    <span class="keyword">N</span>    <span class="keyword">N</span>      <span class="keyword">STOP</span></span><br><span class="line">  <span class="keyword">D</span>    <span class="keyword">N</span>    V      <span class="keyword">STOP</span></span><br><span class="line">  ...</span><br><span class="line">  V    V    V      <span class="keyword">STOP</span></span></span><br></pre></td></tr></table></figure>
<p>假设只有三种词性，有的词性经常在句首出现，有的词性经常在句尾出现，所以要有表示出现在句首句尾的标识。</p>
<p>那么假设v,w 是代表词性的变量，T表示所有的词性集合，maxpre(k,w)表示句子中第k个词且是w的词性为结尾的序列出现的最大概率，q(v|w) 表示上一个词性为w,而下一个词性为v的概率，e(x_k|v) 表示第k个单词为v词性的概率。</p>
<p>那么有 </p>
<p>$maxpre(k,w) = max_{w \in T}(maxpre(k-1,w) \times q(v|w) \times e(x_k|v))$</p>
<p>* <em>注意:当k = 0 时，即开始时 maxpre(0,STAR) = 1 , T = {STAR} ，当到句子最后一个单词时要有一个特判，即 都要加上 q(END|w) 选出最大值，并回溯出序列</em> </p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/02/04/poj1737/" itemprop="url">
                  poj1737
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2014-02-04T18:15:29+08:00" content="2014-02-04">
              2014-02-04
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2014/02/04/poj1737/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2014/02/04/poj1737/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##poj1737</p>
<p>这题的题意很简单，就是说给你N个点，问这N个点可以组成多少个可能的连通图，解题方法我是看了别人的解题报告才知道的，不过里面的大数很难处理，我为了省事直接用了java里的大数类。<br>解题方法是这样的，一个n个顶点的完全图有 n<em>(n-1)/2 条边，那么n个顶点的图可以有2^(n</em>(n-1)/2)的可能性的，（不考虑其连通性的可能性，因为每条边都有选和不选两种选择，所以有这个数字），现设F[n]为所求的n个点的连通图的个数，G[n]为n个顶点的任意图的个数，如果要求F[n] 的值，只要知道n个顶点的不连通图的个数，然后用G[n]的值减去这个值，现在假设一下，这n个点所构成的非联通图中有一个连通块，它的顶点数是k，且包含顶点1，那么求非连通图的个数就是先（因为不连通则k 从1到n-1，k不能等于n）将k-1个顶点与顶点1的组合即先从n-1个选出k-1个点，即<br>C(k-1,n-1) = （n-1）! / ((k-1)! <em> (n-k)!)  ，将它乘以F[k] (即k个点的连通图的个数),再乘以G[ n - k ]即剩下点的组成的任意图的个数，并且对这些数求和，这就是n个顶点的不连通图的个数，再将G[n]的值减去这个值,整个的公式为：<br>F[n] = G[n]  - Sum{C(k-1,N-1)</em>F[k]*G[n-k]),k=1…N-1} ；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXN = <span class="number">60</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner cin = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        BigInteger F[] = <span class="keyword">new</span> BigInteger[MAXN];</span><br><span class="line">        BigInteger G[] = <span class="keyword">new</span> BigInteger[MAXN];</span><br><span class="line">        BigInteger sum = <span class="keyword">new</span> BigInteger(<span class="string">"2"</span>);</span><br><span class="line">        BigInteger N[] = <span class="keyword">new</span> BigInteger[MAXN];</span><br><span class="line">         </span><br><span class="line">          F[<span class="number">1</span>] = BigInteger.valueOf(<span class="number">1</span>);</span><br><span class="line">          F[<span class="number">2</span>] = BigInteger.valueOf(<span class="number">1</span>);</span><br><span class="line">          F[<span class="number">3</span>] = BigInteger.valueOf(<span class="number">4</span>);</span><br><span class="line">          F[<span class="number">4</span>] = BigInteger.valueOf(<span class="number">38</span>);</span><br><span class="line">          N[<span class="number">0</span>] = N[<span class="number">1</span>] = BigInteger.valueOf(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span>  i = <span class="number">1</span>;i &lt; MAXN;i++)&#123;</span><br><span class="line">                  G[i] = sum.pow((i*(i-<span class="number">1</span>)/<span class="number">2</span>));</span><br><span class="line">                  N[i] = N[i-<span class="number">1</span>].multiply(BigInteger.valueOf(i));</span><br><span class="line">            &#125;</span><br><span class="line">             </span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span>  n = <span class="number">3</span>;n &lt; MAXN;n++)&#123;</span><br><span class="line">                sum = BigInteger.valueOf(<span class="number">0</span>);</span><br><span class="line">                sum = sum.add(F[<span class="number">1</span>].multiply(G[n-<span class="number">1</span>]));</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">2</span>;k &lt; n;k++)&#123;</span><br><span class="line">                    sum = sum.add(F[k].multiply(G[n-k].multiply(N[n-<span class="number">1</span>].divide(N[k-<span class="number">1</span>].multiply(N[n-k])))));</span><br><span class="line">                &#125;</span><br><span class="line">                F[n] = G[n].subtract(sum);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> n;</span><br><span class="line">            <span class="keyword">while</span>(cin.hasNext())&#123;</span><br><span class="line">                n = cin.nextInt();</span><br><span class="line">                <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                System.out.println(F[n]);</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中注意的是求组合我是用阶乘求的，其中当k-1等于0时要特殊处理</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/05/22/zoj2314/" itemprop="url">
                  zoj2314
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-05-22T15:31:28+08:00" content="2012-05-22">
              2012-05-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/05/22/zoj2314/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/05/22/zoj2314/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##zoj2314</p>
<p>有上下界网络流问题，<br>具体看这<a href="http://hi.baidu.com/newfarking/blog/item/407826c947aad95cf31fe76f.html" target="_blank" rel="external">http://hi.baidu.com/newfarking/blog/item/407826c947aad95cf31fe76f.html</a></p>
<p>这题是个求无源汇求最大流的问题…..</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">2800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">100000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = INT_MAX / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> N,M,S,T,CN,Case;</span><br><span class="line"><span class="keyword">struct</span> Node</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> next,to, value;</span><br><span class="line">&#125;;</span><br><span class="line">Node n[MAXM];</span><br><span class="line"><span class="keyword">int</span> indiex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> head[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_map</span><span class="params">(<span class="keyword">int</span> from,<span class="keyword">int</span> to,<span class="keyword">int</span> value)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    n[indiex].to = to;</span><br><span class="line">    n[indiex].value = value;</span><br><span class="line">    n[indiex].next = head[from];</span><br><span class="line">    head[from] = indiex++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> _make_map(<span class="keyword">int</span> from,<span class="keyword">int</span> to,<span class="keyword">int</span> value)</span><br><span class="line">&#123;</span><br><span class="line">    make_map(from,to,value);</span><br><span class="line">    make_map(to,from,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> gap[MAXN],d[MAXN],box[MAXN],pre[MAXN],path[MAXN],Flow[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mflow</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(gap,<span class="number">0</span>,<span class="keyword">sizeof</span>(gap));</span><br><span class="line">    <span class="built_in">memset</span>(d,<span class="number">0</span>,<span class="keyword">sizeof</span>(d));</span><br><span class="line">    <span class="built_in">memset</span>(Flow,<span class="number">0</span>,<span class="keyword">sizeof</span>(Flow));</span><br><span class="line">    <span class="built_in">memset</span>(pre,<span class="number">0</span>,<span class="keyword">sizeof</span>(pre));</span><br><span class="line">    <span class="built_in">memset</span>(path,<span class="number">0</span>,<span class="keyword">sizeof</span>(path));</span><br><span class="line">    gap[<span class="number">0</span>] = CN;</span><br><span class="line">    <span class="keyword">bool</span> flag;</span><br><span class="line">    <span class="built_in">memcpy</span>(box,head,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>,reflow = INF;</span><br><span class="line">    <span class="keyword">int</span> u = S;</span><br><span class="line">    <span class="keyword">while</span>(d[S] &lt; CN)</span><br><span class="line">    &#123;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        Flow[u] = reflow;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = box[u]; ~i; i=n[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = n[i].to;</span><br><span class="line">            <span class="keyword">if</span>(n[i].value &gt; <span class="number">0</span> &amp;&amp; d[u] == d[v] + <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                reflow = reflow &lt; n[i].value ? reflow : n[i].value;</span><br><span class="line">                pre[v] = u;</span><br><span class="line">                path[v] = i;</span><br><span class="line">                box[u] = i;</span><br><span class="line">                u = v;</span><br><span class="line">                <span class="keyword">if</span>(u == T)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(sum+=reflow; u!=S; u=pre[u])</span><br><span class="line">                    &#123;</span><br><span class="line">                        n[path[u]].value -= reflow;</span><br><span class="line">                        n[path[u]^<span class="number">1</span>].value += reflow;</span><br><span class="line">                    &#125;</span><br><span class="line">                    reflow = INF;</span><br><span class="line">                &#125;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> Temp = CN;</span><br><span class="line">            <span class="keyword">int</span> loc;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i=n[i].next)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(n[i].value&gt;<span class="number">0</span>&amp;&amp;d[n[i].to] &lt; Temp)</span><br><span class="line">                &#123;</span><br><span class="line">                    loc = i;</span><br><span class="line">                    Temp = d[n[i].to];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            gap[d[u]]--;</span><br><span class="line">            <span class="keyword">if</span>(gap[d[u]] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            d[u] = Temp+<span class="number">1</span>;</span><br><span class="line">            gap[d[u]]++;</span><br><span class="line">            box[u] = loc;</span><br><span class="line">            <span class="keyword">if</span>(u != S)</span><br><span class="line">            &#123;</span><br><span class="line">                u = pre[u];</span><br><span class="line">                reflow  = Flow[u];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> low[MAXM],in[MAXM];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">limit_flow</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(in[i] &gt; <span class="number">0</span>) _make_map(S,i,in[i]);</span><br><span class="line">        <span class="keyword">if</span>(in[i] &lt; <span class="number">0</span>) _make_map(i,T,-in[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    mflow();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = head[S];~i;i=n[i].next)</span><br><span class="line">        <span class="keyword">if</span>(n[i].value) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="comment">// freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;Case);</span><br><span class="line">    <span class="keyword">while</span>(Case--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(head,-<span class="number">1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">        <span class="built_in">memset</span>(in,<span class="number">0</span>,<span class="keyword">sizeof</span>(in));</span><br><span class="line">        <span class="built_in">memset</span>(low,<span class="number">0</span>,<span class="keyword">sizeof</span>(low));</span><br><span class="line">        indiex = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M);</span><br><span class="line">        S = <span class="number">0</span>;</span><br><span class="line">        T = N+<span class="number">1</span>;</span><br><span class="line">        CN = T+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> u,v,c;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; M;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;u,&amp;v,&amp;low[i],&amp;c);</span><br><span class="line">            in[u] -= low[i];</span><br><span class="line">            in[v] += low[i];</span><br><span class="line">            _make_map(u,v,c-low[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(limit_flow())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; M;i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n[(i&lt;&lt;<span class="number">1</span>)^<span class="number">1</span>].value+low[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</span><br><span class="line"><span class="comment">//        for(int i = 0;i &lt; CN;i++)</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            for(int j = head[i];~j;j=n[j].next)</span></span><br><span class="line"><span class="comment">//            &#123;</span></span><br><span class="line"><span class="comment">//                if(n[j].value == INF)</span></span><br><span class="line"><span class="comment">//                cout&lt;&lt;i&lt;&lt;" -&gt; "&lt;&lt;n[j].to&lt;&lt;" INF "&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//                else if(n[j].value &gt; 0)</span></span><br><span class="line"><span class="comment">//                cout&lt;&lt;i&lt;&lt;" -&gt; "&lt;&lt;n[j].to&lt;&lt;" "&lt;&lt;n[j].value&lt;&lt;endl;;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/05/16/poj3164/" itemprop="url">
                  poj3164
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-05-16T16:20:47+08:00" content="2012-05-16">
              2012-05-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/05/16/poj3164/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/05/16/poj3164/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##poj3164</p>
<p>这题一个求最小树形图的题……<br>先前下标写错了，TLE了好多次…..</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">11000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = INT_MAX / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">struct</span> Node</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> u,v;</span><br><span class="line">    <span class="keyword">double</span> value;</span><br><span class="line">&#125;;</span><br><span class="line">Node n[MAXM];</span><br><span class="line"><span class="keyword">int</span> N,X,Y,Z;</span><br><span class="line"><span class="keyword">struct</span> Point</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">double</span> x,y;</span><br><span class="line">&#125;;</span><br><span class="line">Point p[MAXN];</span><br><span class="line"><span class="keyword">int</span> M = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> EdgeNum;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add_edge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">double</span> value)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    n[EdgeNum].v = v;</span><br><span class="line">    n[EdgeNum].u = u;</span><br><span class="line">    n[EdgeNum].value = value;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">double</span> <span class="title">Dis</span><span class="params">(Point a,Point b)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sqrt</span>((a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> pre[MAXN],vis[MAXN],Id[MAXN];</span><br><span class="line"><span class="keyword">double</span> Mincost[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">DirectedMST</span><span class="params">(<span class="keyword">int</span> root)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> cost = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> Cn = N+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; Cn; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            Mincost[i] = INF;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= EdgeNum; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> u = n[i].u;</span><br><span class="line">            <span class="keyword">int</span> v = n[i].v;</span><br><span class="line">            <span class="keyword">if</span>(n[i].value &lt; Mincost[v] &amp;&amp; u!=v)</span><br><span class="line">            &#123;</span><br><span class="line">                pre[v] = u;</span><br><span class="line">                Mincost[v] = n[i].value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; Cn; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == root) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(Mincost[i] == INF) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> indiex = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(Id,-<span class="number">1</span>,<span class="keyword">sizeof</span>(Id));</span><br><span class="line">        <span class="built_in">memset</span>(vis,-<span class="number">1</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">        Mincost[root] = <span class="number">0</span>; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; Cn; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            cost += Mincost[i];</span><br><span class="line">            <span class="keyword">int</span> v = i;</span><br><span class="line">            <span class="keyword">while</span>(vis[v]!=i&amp;&amp;Id[v]==-<span class="number">1</span>&amp;&amp;v!=root)</span><br><span class="line">            &#123;</span><br><span class="line">                vis[v] = i;</span><br><span class="line">                v = pre[v];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(v!=root&amp;&amp;Id[v]==-<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> u = pre[v]; u!=v; u=pre[u])</span><br><span class="line">                &#123;</span><br><span class="line">                    Id[u] = indiex;</span><br><span class="line">                &#125;</span><br><span class="line">                Id[v] = indiex++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(indiex == <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; Cn; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(Id[i] == -<span class="number">1</span>)Id[i] = indiex++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= EdgeNum;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = n[i].v;</span><br><span class="line">            n[i].u = Id[n[i].u];</span><br><span class="line">            n[i].v = Id[n[i].v];</span><br><span class="line">            <span class="keyword">if</span>(n[i].u != n[i].v)</span><br><span class="line">            &#123;</span><br><span class="line">                n[i].value -= Mincost[v];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        Cn = indiex;</span><br><span class="line">        root = Id[root];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cost;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="comment">// freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;M)!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        EdgeNum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>,&amp;p[i].x,&amp;p[i].y);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> u,v;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= M; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;u,&amp;v);</span><br><span class="line">            <span class="keyword">if</span>(u == v) <span class="keyword">continue</span>;</span><br><span class="line">            EdgeNum++;</span><br><span class="line">            add_edge(u,v,Dis(p[u],p[v]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> ans = DirectedMST(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(ans &lt; <span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"poor snoopy\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>,ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/05/12/zoj2788/" itemprop="url">
                  zoj2788
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-05-12T20:36:00+08:00" content="2012-05-12">
              2012-05-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/05/12/zoj2788/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/05/12/zoj2788/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##zoj2788</p>
<p>很简单的一题求最小割，因为有入侵者的房间有多个，所以设一个超级源，将有入侵者的点都连接到上面，容量为无穷，将可以开门的房间与其他房间之间连接边，容量为无穷，反向边容量为1。<br>求最大流，若结果大于INF，说明有边是直接连的，容量为INF，所以输出PANIC ROOM BREACH。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">40</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = INT_MAX / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> M,S,T,CN,Case;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[MAXN][MAXN],flow[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> lev[MAXN],gap[MAXN],cur[MAXN],pre[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sap</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(flow,<span class="number">0</span>,<span class="keyword">sizeof</span>(flow));</span><br><span class="line">    <span class="built_in">memset</span>(cur,<span class="number">0</span>,<span class="keyword">sizeof</span>(cur));</span><br><span class="line">    <span class="built_in">memset</span>(lev,<span class="number">0</span>,<span class="keyword">sizeof</span>(lev));</span><br><span class="line">    <span class="built_in">memset</span>(gap,<span class="number">0</span>,<span class="keyword">sizeof</span>(gap));</span><br><span class="line">    <span class="keyword">int</span> que[MAXN];</span><br><span class="line">    <span class="keyword">int</span> qs = <span class="number">0</span> ;</span><br><span class="line">    que[qs++] = T;</span><br><span class="line">    <span class="keyword">while</span>(qs &gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = que[--qs];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v = <span class="number">0</span>; v &lt;= CN; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[v][u] &amp;&amp; !lev[u])</span><br><span class="line">            &#123;</span><br><span class="line">                lev[v] = lev[v] + <span class="number">1</span>;</span><br><span class="line">                gap[lev[v]]++;</span><br><span class="line">                que[qs++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    BFS over</span></span><br><span class="line">    <span class="keyword">int</span> u = S,v,sum = <span class="number">0</span>,min_flow = INF;</span><br><span class="line">    gap[<span class="number">0</span>] = CN;</span><br><span class="line">    <span class="keyword">while</span>(lev[S] &lt; CN)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(v = cur[u]; v &lt;= CN; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[u][v] &gt; flow[u][v]&amp;&amp;lev[u]==lev[v]+<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                flag=<span class="number">1</span>;</span><br><span class="line">                pre[v]=u;</span><br><span class="line">                cur[u]=v;</span><br><span class="line">                min_flow = min(min_flow,<span class="built_in">map</span>[u][v]-flow[u][v]);</span><br><span class="line">              <span class="comment">//  cout&lt;&lt;u&lt;&lt;" -&gt; "&lt;&lt;v&lt;&lt;' '&lt;&lt;map[u][v]&lt;&lt;' '&lt;&lt;min_flow&lt;&lt;endl;</span></span><br><span class="line">                u=v;</span><br><span class="line">                <span class="keyword">if</span>(u == T)</span><br><span class="line">                &#123;</span><br><span class="line">                    sum += min_flow;</span><br><span class="line">                    <span class="keyword">while</span>(u!=S)</span><br><span class="line">                    &#123;</span><br><span class="line">                        flow[pre[u]][u]+=min_flow;</span><br><span class="line">                        flow[u][pre[u]]-=min_flow;</span><br><span class="line">                        u=pre[u];</span><br><span class="line">                    &#125;</span><br><span class="line">                    min_flow=INF;</span><br><span class="line">                    u=S;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(--gap[lev[u]]==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        lev[u] = CN;</span><br><span class="line">        <span class="keyword">for</span>(v = <span class="number">0</span>; v &lt;= CN; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[u][v]&gt;flow[u][v]&amp;&amp;lev[v] &lt; lev[u])</span><br><span class="line">            &#123;</span><br><span class="line">                lev[u]=lev[v];</span><br><span class="line">                cur[u]=v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        lev[u]++;</span><br><span class="line">        gap[lev[u]]++;</span><br><span class="line">        <span class="keyword">if</span>(u!=S)</span><br><span class="line">            u=pre[u];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="comment">// freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;Case);</span><br><span class="line">    <span class="keyword">char</span> Op[<span class="number">8</span>];</span><br><span class="line">    <span class="keyword">int</span> C;</span><br><span class="line">    <span class="keyword">while</span>(Case--)</span><br><span class="line">    &#123;</span><br><span class="line">       <span class="built_in">memset</span>(<span class="built_in">map</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="built_in">map</span>));</span><br><span class="line">       <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;M,&amp;T);</span><br><span class="line">       S = <span class="number">0</span>;</span><br><span class="line">       T++;</span><br><span class="line">       CN = M + <span class="number">1</span>;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= M;i++)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="built_in">scanf</span>(<span class="string">"%s%d"</span>,Op,&amp;C);</span><br><span class="line">           <span class="keyword">if</span>(<span class="built_in">strlen</span>(Op) == <span class="number">1</span>)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="built_in">map</span>[<span class="number">0</span>][i] = INF;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">int</span> v;</span><br><span class="line">           <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;j &lt;= C;j++)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;v);</span><br><span class="line">               <span class="built_in">map</span>[i][v+<span class="number">1</span>] = INF;</span><br><span class="line">               <span class="built_in">map</span>[v+<span class="number">1</span>][i] += <span class="number">1</span>;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"><span class="comment">//       for(int i = 0;i &lt;= M;i++)</span></span><br><span class="line"><span class="comment">//       &#123;</span></span><br><span class="line"><span class="comment">//           for(int j = 1;j &lt;= M;j++)</span></span><br><span class="line"><span class="comment">//           &#123;</span></span><br><span class="line"><span class="comment">//               if(map[i][j] &gt; 0)</span></span><br><span class="line"><span class="comment">//               cout&lt;&lt;i&lt;&lt;" -&gt; "&lt;&lt;j&lt;&lt;' '&lt;&lt;map[i][j]&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//           &#125;</span></span><br><span class="line"><span class="comment">//       &#125;</span></span><br><span class="line">       <span class="keyword">int</span> ans = sap();</span><br><span class="line">       <span class="keyword">if</span>(ans &gt;= INF )</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">"PANIC ROOM BREACH\n"</span>);</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/05/12/zoj2587/" itemprop="url">
                  zoj2587
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-05-12T19:43:18+08:00" content="2012-05-12">
              2012-05-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/05/12/zoj2587/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/05/12/zoj2587/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##zoj2587</p>
<p>题意是说，M对计算机之间用光纤联系在一起，信息可以在这个网络中流传，现在要使A,B两台计算机断开，问至少需要断开多少个光纤，当然，光纤是有价值的。求获得最小价值的方法是否唯一。<br>求最小割是否唯一，也就是说先求一遍最大流，然后观察它的残次网络，其中形成两个点集，即S,T，若有一个点，或几个点，既不属于S，也不属于T，那么原先这些点与S,或T点集中的点所形成的边是满流，那么就说明这个最小割不唯一，因为可以选择这两条边的任意一个作为最小割中的边。<br>所以求完最大流后，分别对S和T做一次深搜，如果收到的点就是全部点的话，那么最小割唯一，否则，不唯一。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = INT_MAX / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> N,M,S,T,CN;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[MAXN][MAXN],flow[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> lev[MAXN],gap[MAXN],cur[MAXN],pre[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sap</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(flow,<span class="number">0</span>,<span class="keyword">sizeof</span>(flow));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cur[i] = <span class="number">1</span>;</span><br><span class="line">        lev[i] = gap[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> que[MAXN];</span><br><span class="line">    <span class="keyword">int</span> qs = <span class="number">0</span> ;</span><br><span class="line">    que[qs++] = T;</span><br><span class="line">    <span class="keyword">while</span>(qs &gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = que[--qs];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v = <span class="number">1</span>; v &lt;= CN; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[v][u] &amp;&amp; !lev[u])</span><br><span class="line">            &#123;</span><br><span class="line">                lev[v] = lev[v] + <span class="number">1</span>;</span><br><span class="line">                gap[lev[v]]++;</span><br><span class="line">                que[qs++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    BFS over</span></span><br><span class="line">    <span class="keyword">int</span> u = S,v,sum = <span class="number">0</span>,min_flow = INF;</span><br><span class="line">    gap[<span class="number">0</span>] = CN;</span><br><span class="line">    <span class="keyword">while</span>(lev[S] &lt; CN)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(v=cur[u]; v &lt;= CN; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[u][v]&gt;flow[u][v]&amp;&amp;lev[u]==lev[v]+<span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                flag=<span class="number">1</span>;</span><br><span class="line">                pre[v]=u;</span><br><span class="line">                cur[u]=v;</span><br><span class="line">                min_flow = min(min_flow,<span class="built_in">map</span>[u][v]-flow[u][v]);</span><br><span class="line">                u=v;</span><br><span class="line">                <span class="keyword">if</span>(u == T)</span><br><span class="line">                &#123;</span><br><span class="line">                    sum += min_flow;</span><br><span class="line">                    <span class="keyword">while</span>(u!=S)</span><br><span class="line">                    &#123;</span><br><span class="line">                        flow[pre[u]][u]+=min_flow;</span><br><span class="line">                        flow[u][pre[u]]-=min_flow;</span><br><span class="line">                        u=pre[u];</span><br><span class="line">                    &#125;</span><br><span class="line">                    min_flow=INF;</span><br><span class="line">                    u=S;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(--gap[lev[u]]==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        lev[u] = CN;</span><br><span class="line">        <span class="keyword">for</span>(v=<span class="number">1</span>; v &lt;= CN; v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[u][v]&gt;flow[u][v]&amp;&amp;lev[v] &lt; lev[u])</span><br><span class="line">            &#123;</span><br><span class="line">                lev[u]=lev[v];</span><br><span class="line">                cur[u]=v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        lev[u]++;</span><br><span class="line">        gap[lev[u]]++;</span><br><span class="line">        <span class="keyword">if</span>(u!=S)</span><br><span class="line">            u=pre[u];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Num ;</span><br><span class="line"><span class="keyword">bool</span> vis[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS1</span><span class="params">(<span class="keyword">int</span> u)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> v = <span class="number">1</span>;v &lt;= CN;v++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span>(!vis[v] &amp;&amp; <span class="built_in">map</span>[u][v] - flow[u][v] &gt; <span class="number">0</span>)</span><br><span class="line">         &#123;</span><br><span class="line">             vis[v] = <span class="number">1</span>;</span><br><span class="line">             Num++;</span><br><span class="line">             DFS1(v);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS2</span><span class="params">(<span class="keyword">int</span> u)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> v = <span class="number">1</span>;v &lt;= CN;v++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span>(!vis[v] &amp;&amp; <span class="built_in">map</span>[u][v] + flow[u][v] &gt; <span class="number">0</span>)</span><br><span class="line">         &#123;</span><br><span class="line">             vis[v] = <span class="number">1</span>;</span><br><span class="line">             Num++;</span><br><span class="line">             DFS2(v);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="comment">// freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>,&amp;N,&amp;M,&amp;S,&amp;T)&amp;&amp;(N||M||S||T))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(<span class="built_in">map</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="built_in">map</span>));</span><br><span class="line">        CN = N;</span><br><span class="line">        <span class="keyword">int</span> from,to,value;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; M;i++)</span><br><span class="line">        &#123;</span><br><span class="line">           <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;from,&amp;to,&amp;value);</span><br><span class="line">           <span class="built_in">map</span>[from][to] = <span class="built_in">map</span>[to][from] = value;</span><br><span class="line">        &#125;</span><br><span class="line">         sap();</span><br><span class="line">        <span class="built_in">memset</span>(vis,<span class="number">0</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line">        Num = <span class="number">0</span>;</span><br><span class="line">        vis[S] = vis[T] = <span class="number">1</span>;</span><br><span class="line">        DFS1(S);</span><br><span class="line">        DFS2(T);</span><br><span class="line">        <span class="keyword">if</span>(Num == N-<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"UNIQUE\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"AMBIGUOUS\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/05/10/poj1815/" itemprop="url">
                  poj1815
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-05-10T21:02:21+08:00" content="2012-05-10">
              2012-05-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/05/10/poj1815/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/05/10/poj1815/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##poj1815</p>
<p>这一题困了我好几天了……<br>题意是说给N个人，给出这N个人之间的关系，如果A能联系上B的话，那么B也就能联系上A，给出S，T，问至少要去掉几个人，才能使S不能联系上T。<br>这一题涉及到独立轨的概念，<br>独立轨：设A，B是无向图G的两个顶点，从A到B的两条没有公共内部顶点的路径互称为独立轨。A到B的独立轨的最大条数记作P（A,B）。<br>至少要删除P（A,B）个顶点才能使得A和B不连通。<br>求独立轨可以用最大流来求得，不过要将原图拆点，将点v拆成v,v‘，v指向v’有一条边，容量为1，将原先图中的边（u,v）变成u’ -&gt; v，v’ -&gt; u,容量为无穷，源点是S‘，汇点还是T，这样就将点问题转化成边问题。<br>弱独立轨:设A，B是无向图G的两个顶点，从A到B的两条没有公共边的路径互称为独立轨。A到B的独立轨的最大条数记作P’(A,B）。<br>至少要删除P‘（A,B）条边才能使得A和B不连通。<br>现在这个图就转化成了求弱独立轨了…..<br>由于两个被拆点之间每条边的流量为1，就是说任何一个点都不可能用两次，那么求出有多少流量就意味着有多少条独立的点。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">300</span>&lt;&lt;<span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = INT_MAX / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> N,S,T,CN;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[MAXN][MAXN],flow[MAXN][MAXN];</span><br><span class="line"><span class="keyword">int</span> lev[MAXN],gap[MAXN],cur[MAXN],pre[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sap</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(lev,<span class="number">0</span>,<span class="keyword">sizeof</span>(lev));</span><br><span class="line">    <span class="built_in">memset</span>(gap,<span class="number">0</span>,<span class="keyword">sizeof</span>(gap));</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cur[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memset</span>(flow,<span class="number">0</span>,<span class="keyword">sizeof</span>(flow));</span><br><span class="line">    <span class="keyword">int</span> que[MAXN];</span><br><span class="line">    <span class="keyword">int</span> qs = <span class="number">0</span> ;</span><br><span class="line">    que[qs++] = T;</span><br><span class="line">    <span class="keyword">while</span>(qs &gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = que[--qs];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> v = <span class="number">1</span>;v &lt;= CN;v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[v][u] &amp;&amp; !lev[u])</span><br><span class="line">            &#123;</span><br><span class="line">                lev[v] = lev[v] + <span class="number">1</span>;</span><br><span class="line">               gap[lev[v]]++;</span><br><span class="line">              que[qs++] = v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    BFS over</span></span><br><span class="line">    <span class="keyword">int</span> u = S,v,sum = <span class="number">0</span>,min_flow = INF;</span><br><span class="line">    gap[<span class="number">0</span>] = CN;</span><br><span class="line">    <span class="keyword">while</span>(lev[S] &lt; CN)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(v=cur[u];v&lt;=CN;v++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">map</span>[u][v]&gt;flow[u][v]&amp;&amp;lev[u]==lev[v]+<span class="number">1</span>)</span><br><span class="line">   &#123;</span><br><span class="line">    flag=<span class="number">1</span>;</span><br><span class="line">    pre[v]=u;</span><br><span class="line">    cur[u]=v;</span><br><span class="line">     min_flow = min(min_flow,<span class="built_in">map</span>[u][v]-flow[u][v]);</span><br><span class="line">       u=v;</span><br><span class="line">    <span class="keyword">if</span>(u == T)</span><br><span class="line">    &#123;</span><br><span class="line">     sum += min_flow;</span><br><span class="line">     <span class="keyword">while</span>(u!=S)</span><br><span class="line">     &#123;</span><br><span class="line">      flow[pre[u]][u]+=min_flow;</span><br><span class="line">      flow[u][pre[u]]-=min_flow;</span><br><span class="line">      u=pre[u];</span><br><span class="line">     &#125;</span><br><span class="line">     min_flow=INF;</span><br><span class="line">     u=S;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(flag)</span><br><span class="line">   <span class="keyword">continue</span>;</span><br><span class="line">  <span class="keyword">if</span>(--gap[lev[u]]==<span class="number">0</span>)</span><br><span class="line">   <span class="keyword">return</span> sum;</span><br><span class="line">  lev[u] = CN;</span><br><span class="line">  <span class="keyword">for</span>(v=<span class="number">1</span>;v&lt;=CN;v++)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="built_in">map</span>[u][v]&gt;flow[u][v]&amp;&amp;lev[v] &lt; lev[u])</span><br><span class="line">   &#123;</span><br><span class="line">    lev[u]=lev[v];</span><br><span class="line">    cur[u]=v;</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  lev[u]++;</span><br><span class="line">  gap[lev[u]]++;</span><br><span class="line">  <span class="keyword">if</span>(u!=S)</span><br><span class="line">   u=pre[u];</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">   <span class="comment">// freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;N,&amp;S,&amp;T)!=EOF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(<span class="built_in">map</span>,<span class="number">0</span>,<span class="keyword">sizeof</span>(<span class="built_in">map</span>));</span><br><span class="line">        <span class="keyword">int</span> value;</span><br><span class="line">        S += N;</span><br><span class="line">        CN = <span class="number">2</span> * N;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= N; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;value);</span><br><span class="line">                <span class="keyword">if</span>(value)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(i==S-N&amp;&amp;j==T)</span><br><span class="line">                        flag=<span class="number">1</span>;</span><br><span class="line">                    <span class="built_in">map</span>[i+N][j] = INF;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">map</span>[i][i+N] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"NO ANSWER!\n"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> max_f = sap();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,max_f);</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> ans[MAXN];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i==S-N||i==T)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            <span class="built_in">map</span>[i][i+N] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> cur_f = sap();</span><br><span class="line">            <span class="keyword">if</span>(cur_f &lt; max_f)</span><br><span class="line">            &#123;</span><br><span class="line">                cnt++;</span><br><span class="line">                ans[cnt]=i;</span><br><span class="line">                max_f--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">map</span>[i][i+N]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(max_f&lt;=<span class="number">0</span>)</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=cnt; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i!=cnt)</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>,ans[i]);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d"</span>,ans[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2012/05/02/poj3308/" itemprop="url">
                  poj3308
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2012-05-02T21:10:42+08:00" content="2012-05-02">
              2012-05-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ACM/" itemprop="url" rel="index">
                    <span itemprop="name">ACM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2012/05/02/poj3308/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2012/05/02/poj3308/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##poj3308</p>
<p>这题的题意是说，地球人和火星人开战了，现在有一个m*n大的地方，而有l个火星降落伞员要降落此地，为了不让一个火星人落下，地球人用了激光炮，这些激光炮一个能消灭一行或一列，当然，这是有消耗的，问，怎么让消耗最小。<br>这一题乍看与网络流无关，其实我们可以理解为这样，我们将源点和m行相连，容量为该行激光炮的消耗值的以e为底对数（因为最后算消耗值是算乘法的，所以要将其该为对数以便加法运算），汇点和n列相连，容量为该行激光炮的消耗值的以e为底对数，如何取最小的边，使得边和列不连通，也就是说我们将火星人落下的点的行和列连接，容量为无限大，如果这行和这列不连通，则必然这行或这列有一个激光炮，那么这个火星人也就被消灭了……..<br>（这题建图时，又在点的数目上re了一次…..）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;limits.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">800</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = INT_MAX / <span class="number">2</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> N,M,L,S,T,CN,Case;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">struct</span> Node</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> next,to;</span><br><span class="line">    <span class="keyword">double</span> value;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">Node n[MAXN*MAXN];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> indiex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> head[MAXN];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">make_map</span><span class="params">(<span class="keyword">int</span> from,<span class="keyword">int</span> to,<span class="keyword">double</span> value)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    n[indiex].to = to;</span><br><span class="line">    n[indiex].value = value;</span><br><span class="line">    n[indiex].next = head[from];</span><br><span class="line">    head[from] = indiex++;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">void</span> _make_map(<span class="keyword">int</span> from,<span class="keyword">int</span> to,<span class="keyword">double</span> value)</span><br><span class="line">&#123;</span><br><span class="line">    make_map(from,to,value);</span><br><span class="line">    make_map(to,from,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> gap[MAXN],d[MAXN],box[MAXN],pre[MAXN],path[MAXN];</span><br><span class="line"><span class="keyword">double</span> Flow[MAXN];</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">mflow</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(gap,<span class="number">0</span>,<span class="keyword">sizeof</span>(gap));</span><br><span class="line">    <span class="built_in">memset</span>(d,<span class="number">0</span>,<span class="keyword">sizeof</span>(d));</span><br><span class="line">    <span class="built_in">memset</span>(Flow,<span class="number">0</span>,<span class="keyword">sizeof</span>(Flow));</span><br><span class="line">    <span class="built_in">memset</span>(pre,<span class="number">0</span>,<span class="keyword">sizeof</span>(pre));</span><br><span class="line">    <span class="built_in">memset</span>(path,<span class="number">0</span>,<span class="keyword">sizeof</span>(path));</span><br><span class="line">    gap[<span class="number">0</span>] = CN;</span><br><span class="line">    <span class="keyword">bool</span> flag;</span><br><span class="line">    <span class="built_in">memcpy</span>(box,head,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="keyword">double</span> sum = <span class="number">0</span>,reflow = INF;</span><br><span class="line">    <span class="keyword">int</span> u = S;</span><br><span class="line">    <span class="keyword">while</span>(d[S] &lt; CN)</span><br><span class="line">    &#123;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        Flow[u] = reflow;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = box[u]; ~i; i=n[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> v = n[i].to;</span><br><span class="line">            <span class="keyword">if</span>(n[i].value &gt; <span class="number">0</span> &amp;&amp; d[u] == d[v] + <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                reflow = reflow &lt; n[i].value ? reflow : n[i].value;</span><br><span class="line">                pre[v] = u;</span><br><span class="line">                path[v] = i;</span><br><span class="line">                box[u] = i;</span><br><span class="line">                u = v;</span><br><span class="line">                <span class="keyword">if</span>(u == T)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(sum+=reflow; u!=S; u=pre[u])</span><br><span class="line">                    &#123;</span><br><span class="line">                        n[path[u]].value -= reflow;</span><br><span class="line">                        n[path[u]^<span class="number">1</span>].value += reflow;</span><br><span class="line">                    &#125;</span><br><span class="line">                    reflow = INF;</span><br><span class="line">                &#125;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>(!flag)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> Temp = CN;</span><br><span class="line">            <span class="keyword">int</span> loc;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; ~i; i=n[i].next)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(n[i].value&gt;<span class="number">0</span>&amp;&amp;d[n[i].to] &lt; Temp)</span><br><span class="line">                &#123;</span><br><span class="line">                    loc = i;</span><br><span class="line">                    Temp = d[n[i].to];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            gap[d[u]]--;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span>(gap[d[u]] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line"> </span><br><span class="line">            d[u] = Temp+<span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line">            gap[d[u]]++;</span><br><span class="line"> </span><br><span class="line">            box[u] = loc;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">if</span>(u != S)</span><br><span class="line">            &#123;</span><br><span class="line">                u = pre[u];</span><br><span class="line">                reflow  = Flow[u];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="comment">//freopen("in.txt","r",stdin);</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;Case);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span>(Case--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;M,&amp;N,&amp;L);</span><br><span class="line">        <span class="built_in">memset</span>(head,-<span class="number">1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">        indiex = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">        S = <span class="number">0</span>;</span><br><span class="line">        T = M+N+<span class="number">1</span>;</span><br><span class="line">        CN = T+<span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">double</span> value;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= M; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;value);</span><br><span class="line">            _make_map(S,i,<span class="built_in">log</span>(value));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;value);</span><br><span class="line">            _make_map(i+M,T,<span class="built_in">log</span>(value));</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">int</span> from,to;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= L; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;from,&amp;to);</span><br><span class="line">            _make_map(from,to+M,INF);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        for(int i = S;i &lt;= T;i++)</span></span><br><span class="line"><span class="comment">//        &#123;</span></span><br><span class="line"><span class="comment">//            for(int j = head[i];~j;j=n[j].next)</span></span><br><span class="line"><span class="comment">//            &#123;</span></span><br><span class="line"><span class="comment">//                if(n[j].value!=INF&amp;&amp;n[j].value!=0)</span></span><br><span class="line"><span class="comment">//                cout&lt;&lt;i&lt;&lt;' '&lt;&lt;n[j].to&lt;&lt;' '&lt;&lt;n[j].value&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//                if(n[j].value == INF)</span></span><br><span class="line"><span class="comment">//                    cout&lt;&lt;i&lt;&lt;' '&lt;&lt;n[j].to&lt;&lt;" INF"&lt;&lt;endl;</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%.4lf\n"</span>,<span class="built_in">exp</span>(mflow()));</span><br><span class="line"> </span><br><span class="line">      &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="cibiluozu" />
          <p class="site-author-name" itemprop="name">cibiluozu</p>
          <p class="site-description motion-element" itemprop="description">纵有万千风浪在，亦将持剑凯歌往。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">74</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/cibiluozu" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="weibo.com/cibiluozu" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cibiluozu</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"cibiluozu"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>

  
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/MathJax.js"></script>
    <script type="text/javascript" src="http://cdn.staticfile.org/mathjax/2.4.0/config/TeX-AMS-MML_HTMLorMML.js"></script>
  


  
  


</body>
</html>
